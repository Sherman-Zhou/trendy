(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-18d48dda","chunk-09bb1a41","chunk-f4c6914c","chunk-94f63e62","chunk-d2539630"],{"09f4":function(e,t,a){"use strict";a.d(t,"a",(function(){return l})),Math.easeInOutQuad=function(e,t,a,i){return e/=i/2,e<1?a/2*e*e+t:(e--,-a/2*(e*(e-2)-1)+t)};var i=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}();function n(e){document.documentElement.scrollTop=e,document.body.parentNode.scrollTop=e,document.body.scrollTop=e}function r(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function l(e,t,a){var l=r(),s=e-l,c=20,o=0;t="undefined"===typeof t?500:t;var u=function e(){o+=c;var r=Math.easeInOutQuad(o,l,s,t);n(r),o<t?i(e):a&&"function"===typeof a&&a()};u()}},"0e72":function(e,t,a){},"13a9":function(e,t,a){"use strict";a.d(t,"g",(function(){return n})),a.d(t,"m",(function(){return r})),a.d(t,"l",(function(){return l})),a.d(t,"h",(function(){return s})),a.d(t,"d",(function(){return c})),a.d(t,"i",(function(){return o})),a.d(t,"e",(function(){return u})),a.d(t,"a",(function(){return d})),a.d(t,"c",(function(){return h})),a.d(t,"f",(function(){return p})),a.d(t,"b",(function(){return m})),a.d(t,"k",(function(){return v})),a.d(t,"j",(function(){return f}));var i=a("b775");function n(e){return Object(i["a"])({url:"/monitor/vehicles/search",method:"get",params:e})}function r(e){return Object(i["a"])({url:"/internal/equipment/lock",method:"post",data:e})}function l(e){return Object(i["a"])({url:"/external/equipment/queryFireStatus",method:"post",data:e})}function s(e){return Object(i["a"])({url:"/external/equipment/queryLock",method:"post",data:e})}function c(e){return Object(i["a"])({url:"/monitor/vehicle/current-state/".concat(e),method:"get"})}function o(e){return Object(i["a"])({url:"/monitor/trajectories",method:"get",params:e})}function u(e){return Object(i["a"])({url:"/vehicle-maintenances",method:"get",params:e})}function d(e){return Object(i["a"])({url:"/vehicle-maintenances",method:"post",data:e})}function h(e){return Object(i["a"])({url:"/vehicle-maintenances",method:"put",data:e})}function p(e,t){return Object(i["a"])({url:"/vehicle-maintenances/".concat(e),method:"get",params:t})}function m(e){return Object(i["a"])({url:"/vehicle-maintenances/".concat(e),method:"delete"})}function v(e,t){return Object(i["a"])({url:"monitor/trajectoryIds/".concat(e),method:"get",params:t})}function f(e){return Object(i["a"])({url:"/monitor/trajectory-details",method:"get",params:e})}},1832:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return r})),a.d(t,"d",(function(){return l})),a.d(t,"c",(function(){return s})),a.d(t,"e",(function(){return c}));var i=a("b775");function n(e){return Object(i["a"])({url:"/dict-types/VEHICLE-BRAND/".concat(e),method:"get"})}function r(e){return Object(i["a"])({url:"/vehicles",method:"get",params:e})}function l(e){return Object(i["a"])({url:"/vehicles/sync",method:"get",params:e})}function s(e){return Object(i["a"])({url:"/vehicles/".concat(e),method:"get"})}function c(e){return Object(i["a"])({url:"/vehicles",method:"put",data:e})}},"438a":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"status_title"},[e._v(e._s(e.$t("table.FacilityTroble")))]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.list,stripe:"",border:"",size:"small"}},[a("el-table-column",{attrs:{type:"index",label:"#",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"identifyNumber",label:e.$t("table.FacilityID"),align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"alertType",label:e.$t("table.EstimationType"),align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"alertContent",label:e.$t("table.Content"),align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createdDate",label:e.$t("table.AlarmTime"),width:"160",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"handledOn",label:e.$t("table.ProcessingTime"),width:"160",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"remark",label:e.$t("table.ProcessingOpinion"),align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:e.$t("table.Operation"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.process(t.row)}}},[a("span",[e._v(e._s(e.$t("table.Processing")))])])]}}])})],1),e._v(" "),a("pagination",{attrs:{hidden:0===e.list.length,total:e.pages.total,page:e.pages.page,limit:e.pages.limit},on:{pagination:e.changeSize}}),e._v(" "),a("el-dialog",{attrs:{title:e.$t("table.FacilityTroble"),visible:e.facilityDialogVisible,"close-on-click-modal":!1,"destroy-on-close":!0,width:"40%"},on:{close:e.close}},[a("el-form",{ref:"form",staticClass:"dialog-form-container processing_opinion",attrs:{model:e.form,"label-width":"130px"}},[a("el-form-item",{attrs:{label:e.$t("table.ProcessingOpinion")}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{plain:""},on:{click:e.close}},[e._v(e._s(e.$t("permission.cancel")))]),e._v(" "),a("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{type:"primary",plain:""},on:{click:e.saveProcess}},[e._v(e._s(e.$t("permission.confirm")))])],1)],1)],1)},n=[],r=(a("ac6a"),a("96cf"),a("3b8d")),l=a("67e1"),s=a("cb01"),c=a("333d"),o={components:{Pagination:c["a"]},props:{vehicleId:{default:function(){return""}}},data:function(){return{filter:{vehicleId:"",isRead:"",startDate:"",endDate:"",alertContent:"",equipmentIdNum:"",alertType:"",sort:"",page:0,size:20},pages:{total:0,page:0,limit:20},loading:!1,list:[],facilityDialogVisible:!1,form:{}}},mounted:function(){this.filter.vehicleId=this.vehicleId},created:function(){this.fetchData()},watch:{vehicleId:function(e,t){this.filter.vehicleId=e,this.fetchData()}},methods:{changeSize:function(e){e.page>0&&(this.filter.page=e.page-1,this.filter.size=e.limit),0==e.page&&(this.filter.page=e.page,this.filter.size=e.limit),this.pages.limit=e.limit,this.fetchData()},fetchData:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.loading=!0,this.filter.vehicleId=this.vehicleId,Object(s["b"])(this.filter).then((function(e){t.loading=!1,e.data.items.forEach((function(e){e.handledOn&&(e.handledOn=Object(l["a"])(e.handledOn)),e.createdDate=Object(l["a"])(e.createdDate)})),t.list=e.data.items,t.pages.total=e.data.total})).catch((function(e){t.loading=!1}));case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),process:function(e){this.form.id=e.id,this.facilityDialogVisible=!0},saveProcess:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.facilityDialogVisible=!1,e.next=3,Object(s["e"])(this.form);case 3:t=e.sent,t.data,this.$message.success("success"),this.fetchData();case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),close:function(){this.facilityDialogVisible=!1}}},u=o,d=(a("869e"),a("2877")),h=Object(d["a"])(u,i,n,!1,null,null,null);t["default"]=h.exports},"61b4":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"trajectoryId"}},[a("div",{staticClass:"status_title"},[e._v(e._s(e.$t("table.OneWayRecording")))]),e._v(" "),a("div",{staticClass:"filter-container"},[a("div",{staticClass:"filter-left"},[a("el-date-picker",{attrs:{type:"datetimerange","range-separator":"-","start-placeholder":e.$t("table.StartingTime"),"end-placeholder":e.$t("table.EndingTime")},on:{change:e.changeDate},model:{value:e.value1,callback:function(t){e.value1=t},expression:"value1"}}),e._v(" "),a("el-input",{attrs:{placeholder:e.$t("table.EnterRecordingIDkeywords")},model:{value:e.query.trajectoryId,callback:function(t){e.$set(e.query,"trajectoryId",t)},expression:"query.trajectoryId"}}),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.search}},[e._v(e._s(e.$t("table.search")))]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.search}},[e._v(e._s(e.$t("table.Refresh")))])],1)]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.list,stripe:"",border:"",size:"small"}},[a("el-table-column",{attrs:{type:"index",label:"#",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"trajectoryId",label:e.$t("table.RecordID"),align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"startTime",label:e.$t("table.EngineStarting"),align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"endTime",label:e.$t("table.EngineEnding"),align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"mileage",label:e.$t("table.Mileage")+"(Km)",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"remark",label:e.$t("table.Operation"),width:"130",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.lookMap(t.row)}}},[a("span",[e._v(e._s(e.$t("table.CheckMap")))])])]}}])})],1),e._v(" "),a("pagination",{attrs:{hidden:0===e.list.length,total:e.pages.total,page:e.pages.page,limit:e.pages.limit},on:{pagination:e.changeSize}}),e._v(" "),a("el-dialog",{attrs:{visible:e.dialogVisible,"close-on-click-modal":!1,"destroy-on-close":!0,width:"50%"},on:{close:e.close}},[a("div",{staticStyle:{width:"100%",height:"550px"},attrs:{id:"map-record"}})])],1)},n=[],r=(a("ac6a"),a("96cf"),a("3b8d")),l=a("333d"),s=a("67e1"),c=a("13a9"),o={components:{Pagination:l["a"]},props:{vehicleId:{default:function(){return""}}},data:function(){return{value1:"",query:{startDate:"",endDate:"",trajectoryId:"",trajectoryIds:"",vehicleId:""},loading:!1,list:[],pages:{total:0,page:0,limit:20},dialogVisible:!1,palce:null,driverlist:[],center:{}}},mounted:function(){this.query.vehicleId=this.vehicleId},created:function(){this.fetchData()},watch:{vehicleId:function(e,t){this.query.vehicleId=e,this.fetchData()}},methods:{search:function(){this.fetchData()},changeSize:function(e){e.page>0&&(this.query.page=e.page-1,this.query.size=e.limit),0==e.page&&(this.query.page=e.page,this.query.size=e.limit),this.pages.limit=e.limit,this.fetchData()},changeDate:function(e){e?(this.query.startDate=Object(s["a"])(e[0]),this.query.endDate=Object(s["a"])(e[1])):(this.query.startDate="",this.query.endDate="")},fetchData:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.loading=!0,Object(c["i"])(this.query).then((function(e){e.data.items.forEach((function(e){e.startTime&&(e.startTime=Object(s["a"])(e.startTime)),e.endTime&&(e.endTime=Object(s["a"])(e.endTime))})),t.list=e.data.items,t.pages.total=e.data.total,t.loading=!1})).catch((function(e){t.loading=!1}));case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),lookMap:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var a,i,n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.dialogVisible=!0,this.query.trajectoryId=t.trajectoryId,e.next=4,Object(c["j"])(this.query);case 4:a=e.sent,i=a.data,this.driverlist=i,this.center=i[0],setTimeout((function(){n.initMaps()}),10);case 9:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),close:function(){this.dialogVisible=!1},initMaps:function(){var e=this.center,t=new google.maps.Map(document.getElementById("map-record"),{center:e,zoom:15,mapTypeId:google.maps.MapTypeId.ROADMAP,mapTypeControl:!1,panControl:!1,zoomControl:!0,streetViewControl:!1});this.drawDriverRoute(t)},drawDriverRoute:function(e){for(var t=this.driverlist,a=new google.maps.Polyline({path:t,geodesic:!0,strokeColor:"#0000FF",strokeOpacity:.8,strokeWeight:6}),i=0;i<t.length;i++)new google.maps.Marker({position:t[i],map:e});a.setMap(e)}}},u=o,d=(a("abc0"),a("2877")),h=Object(d["a"])(u,i,n,!1,null,"4a84200c",null);t["default"]=h.exports},"67e1":function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));a("f576");function i(e){var t=new Date(e),a=t.getFullYear(),i=(t.getMonth()+1+"").padStart(2,"0"),n=(t.getDate()+"").padStart(2,"0"),r=(t.getHours()+"").padStart(2,"0"),l=(t.getMinutes()+"").padStart(2,"0"),s=(t.getSeconds()+"").padStart(2,"0");return"".concat(a,"-").concat(i,"-").concat(n," ").concat(r,":").concat(l,":").concat(s)}},7272:function(e,t,a){},7615:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"status_title"},[e._v(e._s(e.$t("table.CarsMaintenance")))]),e._v(" "),a("div",{staticClass:"filter-container"},[a("div",{staticClass:"filter-left basicCarsInformation"},[e._v("\n      "+e._s(e.$t("table.BasicCarsInformation"))+"：\n      "),a("span",{staticClass:"tankVolume"},[e._v("\n        "+e._s(e.$t("table.initMileage"))+"：\n        "),a("el-input",{on:{change:e.changeInitMileage},model:{value:e.vehicleDetails.initMileage,callback:function(t){e.$set(e.vehicleDetails,"initMileage",t)},expression:"vehicleDetails.initMileage"}}),e._v("Km\n      ")],1),e._v(" "),a("span",{staticClass:"tankVolume"},[e._v("\n        "+e._s(e.$t("table.OilBoxcapacity"))+"：\n        "),a("el-input",{on:{change:e.inputNumber},model:{value:e.vehicleDetails.tankVolume,callback:function(t){e.$set(e.vehicleDetails,"tankVolume",t)},expression:"vehicleDetails.tankVolume"}}),e._v("L\n      ")],1),e._v(" "),a("span",{staticClass:"tankVolume"},[e._v("\n        "+e._s(e.$t("table.Oilconsumption"))+"：\n        "),a("el-input",{on:{change:e.changeFuelConsumption},model:{value:e.vehicleDetails.fuelConsumption,callback:function(t){e.$set(e.vehicleDetails,"fuelConsumption",t)},expression:"vehicleDetails.fuelConsumption"}}),e._v("Km/L\n      ")],1),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.Reset}},[e._v(e._s(e.$t("table.Reset")))])],1)]),e._v(" "),a("div",{staticClass:"filter-container"},[a("div",{staticClass:"filter-left"},[e._v(e._s(e.$t("table.MaintenanceInformation")))])]),e._v(" "),a("div",{staticClass:"filter-container"},[a("div",{staticClass:"filter-left maintenance"},[a("el-button",{attrs:{type:"primary"},on:{click:e.add}},[e._v(e._s(e.$t("table.AddMaintenance")))]),e._v(" "),a("div",[e._v(e._s(e.$t("table.Prediction"))+"："+e._s(e.$t("table.RemainingOil"))+"："+e._s(e.VehicleStateDTO.remainingFuel)+" L")]),e._v(" "),a("div",[e._v(e._s(e.$t("table.MileageRightnow"))+"："+e._s(e.VehicleStateDTO.totalMileage)+" Km")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.search}},[e._v(e._s(e.$t("table.Refresh")))])],1)]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.list,stripe:"",border:"",size:"small"}},[a("el-table-column",{attrs:{type:"index",label:"#",align:"center",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createdDate",label:e.$t("table.Time"),align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"fuel",label:e.$t("table.FuelRemaining")+"(L)",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"mileage",label:e.$t("table.Mileage")+"(Km)",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"lastModifiedBy",label:e.$t("table.Recorder"),align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"remark",label:e.$t("table.remark"),align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:e.$t("table.Operation"),align:"center",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{plain:"",size:"mini",type:"primary"},on:{click:function(a){return e.edit(t.row)}}},[a("span",[e._v(e._s(e.$t("table.edit")))])]),e._v(" "),a("el-button",{attrs:{plain:"",size:"mini",type:"danger"},on:{click:function(a){return e.del(t.row)}}},[a("span",[e._v(e._s(e.$t("table.delete")))])])]}}])})],1),e._v(" "),a("el-dialog",{staticClass:"cars_maintenance",attrs:{title:e.dialogTitle,visible:e.dialogVisible,"close-on-click-modal":!1,"destroy-on-close":!0,width:"40%"},on:{close:e.close}},[a("el-form",{ref:"form",staticClass:"dialog-form-container form_cars",attrs:{model:e.form,"label-width":"130px"}},[a("el-form-item",{attrs:{label:e.$t("table.FuelRemaining")}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.fuel,callback:function(t){e.$set(e.form,"fuel",t)},expression:"form.fuel"}}),e._v("L\n      ")],1),e._v(" "),a("el-form-item",{attrs:{label:e.$t("table.Mileage")}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.mileage,callback:function(t){e.$set(e.form,"mileage",t)},expression:"form.mileage"}}),e._v("Km\n        "),a("div",{staticClass:"banner_title"},[e._v("（里程數：錶盤讀取）")])],1),e._v(" "),a("el-form-item",{attrs:{label:e.$t("table.Recorder")}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.lastModifiedBy,callback:function(t){e.$set(e.form,"lastModifiedBy",t)},expression:"form.lastModifiedBy"}})],1),e._v(" "),a("el-form-item",{attrs:{label:e.$t("table.remark")}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{plain:""},on:{click:e.close}},[e._v(e._s(e.$t("permission.cancel")))]),e._v(" "),a("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{type:"primary",plain:""},on:{click:e.save}},[e._v(e._s(e.$t("permission.confirm")))])],1)],1)],1)},n=[],r=(a("c5f6"),a("3b2b"),a("ac6a"),a("96cf"),a("3b8d")),l=a("67e1"),s=a("13a9"),c=a("1832"),o={props:{vehicleId:{default:function(){return""}},vehicleDetails:{default:function(){return{}},type:Object}},data:function(){return{value1:"",filter:{},loading:!1,list:[],form:{id:"",vehicleId:""},id:"",dialogVisible:!1,dialogTitle:this.$t("table.add"),VehicleStateDTO:{}}},mounted:function(){this.form.vehicleId=this.vehicleId},created:function(){this.getMaintenancese(),this.getCurrentState(),console.log(this.vehicleDetails,"aaaaaaaaaaaaaaaaa")},watch:{vehicleId:function(e,t){console.log(e),this.form.vehicleId=e,this.getMaintenancese(),this.getCurrentState()}},methods:{search:function(){this.getMaintenancese(),this.getCurrentState()},getMaintenancese:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,e.next=3,Object(s["e"])({vehicleId:this.vehicleId});case 3:t=e.sent,a=t.data,a.forEach((function(e){e.createdDate=Object(l["a"])(e.createdDate)})),this.list=a,this.loading=!1;case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getCurrentState:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(s["d"])(this.vehicleId);case 2:t=e.sent,a=t.data,a.equipment||(a.equipment={}),a.trajectoryDetails||(a.trajectoryDetails={}),this.VehicleStateDTO=a;case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),check:function(e){var t=new RegExp("^(([0-9]+\\.[0-9]*[1-9][0-9]*)|([0-9]*[1-9][0-9]*\\.[0-9]+)|([0-9]*[1-9][0-9]*))$"),a=t.test(e);return a},changeInitMileage:function(){this.vehicleDetails.initMileage=Number(this.vehicleDetails.initMileage);var e=this.check(this.vehicleDetails.initMileage);e||this.$message.warning("Not Number!")},inputNumber:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.vehicleDetails.tankVolume=Number(this.vehicleDetails.tankVolume),t=this.check(this.vehicleDetails.tankVolume),t){e.next=5;break}return this.$message.warning("Not Number!"),e.abrupt("return");case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),changeFuelConsumption:function(){this.vehicleDetails.fuelConsumption=Number(this.vehicleDetails.fuelConsumption);var e=this.check(this.vehicleDetails.fuelConsumption);e||this.$message.warning("Not Number!")},Reset:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.vehicleDetails.initMileage){e.next=3;break}return this.$message.warning("Not Number!"),e.abrupt("return");case 3:if(this.vehicleDetails.tankVolume){e.next=6;break}return this.$message.warning("Not Number!"),e.abrupt("return");case 6:if(this.vehicleDetails.fuelConsumption){e.next=9;break}return this.$message.warning("Not Number!"),e.abrupt("return");case 9:return e.next=11,Object(c["e"])(this.vehicleDetails);case 11:e.sent,this.$emit("cb",this.vehicleId);case 13:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),add:function(){this.dialogVisible=!0},edit:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.id=t.id,this.dialogTitle=this.$t("table.edit"),e.next=4,Object(s["f"])(this.id);case 4:a=e.sent,i=a.data,this.form=i,this.dialogVisible=!0;case 8:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),save:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.id){e.next=9;break}return e.next=3,Object(s["a"])(this.form);case 3:t=e.sent,t.data,this.getMaintenancese(),this.dialogVisible=!1,e.next=18;break;case 9:return a={vehicleId:this.vehicleId,id:this.form.id,lastModifiedBy:this.form.lastModifiedBy,fuel:this.form.fuel,mileage:this.form.mileage,remark:this.form.remark},e.next=12,Object(s["c"])(a);case 12:i=e.sent,i.data,this.getMaintenancese(),this.dialogVisible=!1,this.form={},this.id="";case 18:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),close:function(){this.dialogVisible=!1},del:function(e){var t=this,a=this;this.$confirm(this.$t("permission.delete"),{confirmButtonText:this.$t("permission.confirm"),cancelButtonText:this.$t("permission.cancel"),type:"warning"}).then(Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(s["b"])(e.id);case 2:t.sent,a.$message({message:"success",type:"success"}),a.getMaintenancese();case 5:case"end":return t.stop()}}),t)})))).catch((function(){a.$message({type:"info",message:t.$t("permission.cancel")})}))}}},u=o,d=(a("b9d7"),a("2877")),h=Object(d["a"])(u,i,n,!1,null,null,null);t["default"]=h.exports},"7e63":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"status_title"},[e._v(e._s(e.$t("table.PlayRecording")))]),e._v(" "),a("div",{staticClass:"filter-container"},[a("div",{staticClass:"filter-left",attrs:{id:"recording-id"}},[a("el-radio",{attrs:{label:"1"},model:{value:e.radio1,callback:function(t){e.radio1=t},expression:"radio1"}},[e._v(e._s(e.$t("table.RecordingID"))+":")]),e._v(" "),a("el-select",{attrs:{filterable:"",clearable:"",placeholder:e.$t("table.RecordID")},model:{value:e.query.trajectoryId,callback:function(t){e.$set(e.query,"trajectoryId",t)},expression:"query.trajectoryId"}},e._l(e.trajectoryIds,(function(e,t){return a("el-option",{key:t,attrs:{label:e,value:e}})})),1)],1)]),e._v(" "),a("div",{staticClass:"filter-container"},[a("div",{staticClass:"filter-left accordingTime"},[a("div",[a("el-radio",{attrs:{label:"2"},model:{value:e.radio1,callback:function(t){e.radio1=t},expression:"radio1"}},[e._v(e._s(e.$t("table.AccordingTime"))+":")]),e._v(" "),a("el-date-picker",{attrs:{type:"datetimerange","range-separator":"-","start-placeholder":e.$t("table.StartingTime"),"end-placeholder":e.$t("table.EndingTime")},on:{change:e.changeDate},model:{value:e.value1,callback:function(t){e.value1=t},expression:"value1"}}),e._v(" "),a("el-button",{staticClass:"checkRecording",attrs:{type:"primary"},on:{click:e.search}},[e._v(e._s(e.$t("table.CheckRecording")))])],1)])]),e._v(" "),a("div",{staticStyle:{width:"90%",height:"550px"},attrs:{id:"map"}}),e._v(" "),a("div",{staticClass:"filter-container"},[a("div",{staticClass:"filter-left speed"},[a("div",[e._v(e._s(e.$t("table.ExactlySpeed"))+":"+e._s(e.actualSpeed)+"Km/h")]),e._v(" "),a("div",[e._v(e._s(e.$t("table.TotalMileageRecords"))+":"+e._s(e.totalMileage)+"Km")])])])])},n=[],r=(a("ac6a"),a("96cf"),a("3b8d")),l=a("67e1"),s=a("13a9"),c={props:{vehicleId:{default:function(){return""}}},data:function(){return{value1:"",radio1:"1",query:{startDate:"",endDate:"",trajectoryId:"",trajectoryIds:"",vehicleId:""},loading:!1,trajectoryIds:[],driverlist:[],center:{lat:35.667373,lng:139.89358},place:null,request:null,totalMileage:"0",actualSpeed:"0"}},mounted:function(){this.initMap(),this.query.vehicleId=this.vehicleId},created:function(){this.getTrajectoryIds()},watch:{vehicleId:function(e,t){console.log(e),this.query.vehicleId=e,this.getTrajectoryIds()}},methods:{changeDate:function(e){e?(this.query.startDate=Object(l["a"])(e[0]),this.query.endDate=Object(l["a"])(e[1])):(this.query.startDate="",this.query.endDate="")},getTrajectoryIds:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(s["k"])(this.vehicleId);case 2:t=e.sent,a=t.data,this.trajectoryIds=a;case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),search:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,a,i,n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=this,this.vehicleId){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,Object(s["j"])(this.query);case 5:a=e.sent,i=a.data,this.center=i[0],this.driverlist=i,n=0,i.length>0&&(i.forEach((function(e){n+=e.actualSpeed})),this.actualSpeed=(n/i.length).toFixed(2),i[0].mileage&&(r=i[i.length-1].mileage-i[0].mileage,this.totalMileage=r.toFixed(2))),setTimeout((function(){t.initMap()}),10);case 12:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),initMap:function(){var e=this.center,t=new google.maps.Map(document.getElementById("map"),{center:e,zoom:15,mapTypeId:google.maps.MapTypeId.ROADMAP,mapTypeControl:!1,panControl:!1,zoomControl:!0,streetViewControl:!1});this.drawDriverRoute(t)},drawDriverRoute:function(e){for(var t=this.driverlist,a=new google.maps.Polyline({path:t,geodesic:!0,strokeColor:"#0000FF",strokeOpacity:.8,strokeWeight:6}),i=0;i<t.length;i++)new google.maps.Marker({position:t[i],map:e});a.setMap(e)}}},o=c,u=(a("87bb"),a("2877")),d=Object(u["a"])(o,i,n,!1,null,null,null);t["default"]=d.exports},"869e":function(e,t,a){"use strict";var i=a("0e72"),n=a.n(i);n.a},"87bb":function(e,t,a){"use strict";var i=a("e13c"),n=a.n(i);n.a},"881c":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main"},[a("div",{staticClass:"menu-tree"},[a("div",{staticClass:"menu-tree-hd"},[a("el-input",{attrs:{placeholder:e.$t("table.LicensePlate")},model:{value:e.query.licensePlateNumberOrDeviceId,callback:function(t){e.$set(e.query,"licensePlateNumberOrDeviceId",t)},expression:"query.licensePlateNumberOrDeviceId"}}),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.search}},[e._v(e._s(e.$t("table.search")))])],1),e._v(" "),a("div",{staticClass:"menu-tree-hd OnlineOnly"},[a("el-button",{attrs:{type:"primary"},on:{click:e.search}},[e._v(e._s(e.$t("table.Refresh")))])],1),e._v(" "),a("el-tree",{attrs:{data:e.data,"node-key":"id","default-expand-all":"","highlight-current":"","expand-on-click-node":!1},on:{"node-click":e.handleNodeClick},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.node;t.data;return a("span",{staticClass:"custom-tree-node"},[a("span",[e._v(e._s(i.label.length<10?i.label:i.label.substring(0,10)+"..."))]),e._v(" "),a("el-tooltip",{staticClass:"tooltip",attrs:{effect:"dark",content:i.label,placement:"right"}},[a("span",[a("el-button",{attrs:{type:"text",size:"mini"}})],1)])],1)}}])})],1),e._v(" "),a("div",{staticClass:"app-container"},[a("div",{staticClass:"filter-container"},[a("div",{staticClass:"basicInformation"},[e._v(e._s(e.$t("table.BasicInformation"))+"：")]),e._v(" "),a("el-row",{staticStyle:{width:"100%"},attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("div",{staticClass:"grid-content bg-purple"},[a("div",{staticClass:"input_text"},[a("span",[e._v(e._s(e.$t("table.Licenseplate")))]),e._v(" "),a("el-input",{model:{value:e.vehicleDetails.licensePlateNumber,callback:function(t){e.$set(e.vehicleDetails,"licensePlateNumber",t)},expression:"vehicleDetails.licensePlateNumber"}})],1),e._v(" "),a("div",{staticClass:"input_text"},[a("span",[e._v(e._s(e.$t("table.Makes")))]),e._v(" "),a("el-input",{model:{value:e.vehicleDetails.brand,callback:function(t){e.$set(e.vehicleDetails,"brand",t)},expression:"vehicleDetails.brand"}})],1),e._v(" "),a("div",{staticClass:"input_text"},[a("span",[e._v(e._s(e.$t("table.Model")))]),e._v(" "),a("el-input",{model:{value:e.vehicleDetails.type,callback:function(t){e.$set(e.vehicleDetails,"type",t)},expression:"vehicleDetails.type"}})],1),e._v(" "),a("div",{staticClass:"input_text"},[a("span",[e._v(e._s(e.$t("table.Year")))]),e._v(" "),a("el-input",{model:{value:e.vehicleDetails.prodYear,callback:function(t){e.$set(e.vehicleDetails,"prodYear",t)},expression:"vehicleDetails.prodYear"}})],1)])]),e._v(" "),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("div",{staticClass:"input_text"},[a("span",[e._v(e._s(e.$t("table.Area")))]),e._v(" "),a("el-input",{model:{value:e.vehicleDetails.divName,callback:function(t){e.$set(e.vehicleDetails,"divName",t)},expression:"vehicleDetails.divName"}})],1),e._v(" "),a("div",{staticClass:"input_text"},[a("span",[e._v(e._s(e.$t("table.Organization")))]),e._v(" "),a("el-input",{model:{value:e.vehicleDetails.orgName,callback:function(t){e.$set(e.vehicleDetails,"orgName",t)},expression:"vehicleDetails.orgName"}})],1)])]),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.setLock(!0)}}},[e._v(e._s(e.$t("table.Unlock")))]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.setLock(!1)}}},[e._v(e._s(e.$t("table.Lock")))])],1)],1)],1),e._v(" "),a("el-tabs",{attrs:{type:"card"},on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:e.$t("table.RealTimeStatus"),name:"first"}},[a("div",{staticClass:"status_title"},[e._v(e._s(e.$t("table.RealTimeStatus")))]),e._v(" "),a("div",{staticClass:"status_title"},[a("el-button",{attrs:{type:"primary"},on:{click:e.RefreshRealTimeStatus}},[e._v(e._s(e.$t("table.Refresh")))])],1),e._v(" "),a("el-row",{staticStyle:{width:"100%"},attrs:{gutter:20}},[a("el-col",{attrs:{span:10}},[a("div",{staticClass:"grid-content bg-purple vehicle-state"},[a("div",{staticClass:"input_text"},[a("span",[e._v(e._s(e.$t("table.FacilityID")))]),e._v(" "),a("el-input",{model:{value:e.VehicleStateDTO.equipment.identifyNumber,callback:function(t){e.$set(e.VehicleStateDTO.equipment,"identifyNumber",t)},expression:"VehicleStateDTO.equipment.identifyNumber"}})],1),e._v(" "),a("div",{staticClass:"input_text"},[a("span",[e._v(e._s(e.$t("table.FacilityIMEI")))]),e._v(" "),a("el-input",{model:{value:e.VehicleStateDTO.equipment.imei,callback:function(t){e.$set(e.VehicleStateDTO.equipment,"imei",t)},expression:"VehicleStateDTO.equipment.imei"}})],1),e._v(" "),a("div",{staticClass:"input_text"},[a("span",[e._v(e._s(e.$t("table.FirmwareVersion")))]),e._v(" "),a("el-input",{model:{value:e.VehicleStateDTO.equipment.version,callback:function(t){e.$set(e.VehicleStateDTO.equipment,"version",t)},expression:"VehicleStateDTO.equipment.version"}})],1),e._v(" "),a("div",{staticClass:"input_text"},[a("span",[e._v(e._s(e.$t("table.SIMCardNumber")))]),e._v(" "),a("el-input",{model:{value:e.VehicleStateDTO.equipment.simCardNum,callback:function(t){e.$set(e.VehicleStateDTO.equipment,"simCardNum",t)},expression:"VehicleStateDTO.equipment.simCardNum"}})],1),e._v(" "),a("div",{staticClass:"input_text"},[a("span",[e._v(e._s(e.$t("table.Ignitionstatus")))]),e._v(" "),a("el-input",{model:{value:e.Ignitionstatus.fireStatus,callback:function(t){e.$set(e.Ignitionstatus,"fireStatus",t)},expression:"Ignitionstatus.fireStatus"}})],1),e._v(" "),a("div",{staticClass:"input_text"},[a("span",[e._v(e._s(e.$t("table.Doorlockstatus")))]),e._v(" "),a("el-input",{model:{value:e.doorLockstatus.modeStatus,callback:function(t){e.$set(e.doorLockstatus,"modeStatus",t)},expression:"doorLockstatus.modeStatus"}})],1),e._v(" "),a("div",{staticClass:"input_text"},[a("span",[e._v(e._s(e.$t("table.Voltage")))]),e._v(" "),a("el-input",{model:{value:e.VehicleStateDTO.trajectoryDetails.voltageInput2,callback:function(t){e.$set(e.VehicleStateDTO.trajectoryDetails,"voltageInput2",t)},expression:"VehicleStateDTO.trajectoryDetails.voltageInput2"}}),e._v("V\n\t\t\t\t\t\t\t\t")],1),e._v(" "),a("div",{staticClass:"input_text"},[a("span",[e._v(e._s(e.$t("table.remark")))]),e._v(" "),a("el-input",{attrs:{type:"textarea"},model:{value:e.VehicleStateDTO.equipment.remark,callback:function(t){e.$set(e.VehicleStateDTO.equipment,"remark",t)},expression:"VehicleStateDTO.equipment.remark"}})],1)])]),e._v(" "),a("el-col",{attrs:{span:14}},[a("div",{staticClass:"grid-content bg-purple-light vehicle-state"},[a("div",{staticClass:"input_text"},[a("span",[e._v(e._s(e.$t("table.ConnectingTime")))]),e._v(" "),a("el-input",{model:{value:e.VehicleStateDTO.trajectoryDetails.receivedTime,callback:function(t){e.$set(e.VehicleStateDTO.trajectoryDetails,"receivedTime",t)},expression:"VehicleStateDTO.trajectoryDetails.receivedTime"}})],1),e._v(" "),a("div",{staticClass:"input_text"},[a("span",[e._v(e._s(e.$t("table.Speed")))]),e._v(" "),a("el-input",{model:{value:e.VehicleStateDTO.trajectoryDetails.actualSpeed,callback:function(t){e.$set(e.VehicleStateDTO.trajectoryDetails,"actualSpeed",t)},expression:"VehicleStateDTO.trajectoryDetails.actualSpeed"}})],1),e._v(" "),a("div",{staticClass:"input_text"},[a("span",[e._v(e._s(e.$t("table.Longitude")))]),e._v(" "),a("el-input",{model:{value:e.VehicleStateDTO.trajectoryDetails.lng,callback:function(t){e.$set(e.VehicleStateDTO.trajectoryDetails,"lng",t)},expression:"VehicleStateDTO.trajectoryDetails.lng"}}),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.lookMap(e.VehicleStateDTO.trajectoryDetails)}}},[e._v(e._s(e.$t("table.CheckMap")))])],1),e._v(" "),a("div",{staticClass:"input_text"},[a("span",[e._v(e._s(e.$t("table.Latitude")))]),e._v(" "),a("el-input",{model:{value:e.VehicleStateDTO.trajectoryDetails.lat,callback:function(t){e.$set(e.VehicleStateDTO.trajectoryDetails,"lat",t)},expression:"VehicleStateDTO.trajectoryDetails.lat"}})],1),e._v(" "),a("div",{staticClass:"input_text"},[a("span",[e._v(e._s(e.$t("table.Mileage")))]),e._v(" "),a("el-input",{model:{value:e.VehicleStateDTO.totalMileage,callback:function(t){e.$set(e.VehicleStateDTO,"totalMileage",t)},expression:"VehicleStateDTO.totalMileage"}}),e._v("Km\n\t\t\t\t\t\t\t\t")],1),e._v(" "),a("div",{staticClass:"input_text remaining_oil"},[a("span",[e._v(e._s(e.$t("table.RemainingOil")))]),e._v(" "),a("el-input",{attrs:{disabled:""},model:{value:e.remainingFuel,callback:function(t){e.remainingFuel=t},expression:"remainingFuel"}}),e._v("=\n\t\t\t\t\t\t\t\t\t"),a("el-input",{model:{value:e.VehicleStateDTO.remainingFuel,callback:function(t){e.$set(e.VehicleStateDTO,"remainingFuel",t)},expression:"VehicleStateDTO.remainingFuel"}}),e._v("L\n\t\t\t\t\t\t\t\t\t"),a("span",[e._v("("+e._s(e.$t("table.Prediction"))+")")])],1),e._v(" "),a("div",{staticClass:"input_text"},[a("span",[e._v(e._s(e.$t("table.LeftFront")))]),e._v(" "),a("el-input",{attrs:{disabled:""},model:{value:e.VehicleStateDTO.trajectoryDetails.tirePressureFrontLeft,callback:function(t){e.$set(e.VehicleStateDTO.trajectoryDetails,"tirePressureFrontLeft",t)},expression:"\n\t\t\t\t\t\t\t\t\t\t\tVehicleStateDTO.trajectoryDetails.tirePressureFrontLeft\n\t\t\t\t\t\t\t\t\t\t"}}),e._v("KPa\n\t\t\t\t\t\t\t\t")],1),e._v(" "),a("div",{staticClass:"input_text"},[a("span",[e._v(e._s(e.$t("table.RightFront")))]),e._v(" "),a("el-input",{attrs:{disabled:""},model:{value:e.VehicleStateDTO.trajectoryDetails.tirePressureFrontRight,callback:function(t){e.$set(e.VehicleStateDTO.trajectoryDetails,"tirePressureFrontRight",t)},expression:"\n\t\t\t\t\t\t\t\t\t\t\tVehicleStateDTO.trajectoryDetails.tirePressureFrontRight\n\t\t\t\t\t\t\t\t\t\t"}}),e._v("KPa\n\t\t\t\t\t\t\t\t")],1),e._v(" "),a("div",{staticClass:"input_text"},[a("span",[e._v(e._s(e.$t("table.LeftBack")))]),e._v(" "),a("el-input",{attrs:{disabled:""},model:{value:e.VehicleStateDTO.trajectoryDetails.tirePressureRearLeft,callback:function(t){e.$set(e.VehicleStateDTO.trajectoryDetails,"tirePressureRearLeft",t)},expression:"\n\t\t\t\t\t\t\t\t\t\t\tVehicleStateDTO.trajectoryDetails.tirePressureRearLeft\n\t\t\t\t\t\t\t\t\t\t"}}),e._v("KPa\n\t\t\t\t\t\t\t\t")],1),e._v(" "),a("div",{staticClass:"input_text"},[a("span",[e._v(e._s(e.$t("table.RightBack")))]),e._v(" "),a("el-input",{attrs:{disabled:""},model:{value:e.VehicleStateDTO.trajectoryDetails.tirePressureRearRight,callback:function(t){e.$set(e.VehicleStateDTO.trajectoryDetails,"tirePressureRearRight",t)},expression:"\n\t\t\t\t\t\t\t\t\t\t\tVehicleStateDTO.trajectoryDetails.tirePressureRearRight\n\t\t\t\t\t\t\t\t\t\t"}}),e._v("KPa\n\t\t\t\t\t\t\t\t")],1)])])],1)],1),e._v(" "),a("el-tab-pane",{attrs:{label:e.$t("table.OneWayRecording"),name:"second"}},["second"==e.name?a("oneWayRecording",{attrs:{vehicleId:e.vehicleId}}):e._e()],1),e._v(" "),a("el-tab-pane",{attrs:{label:e.$t("table.CarsMaintenance"),name:"third"}},["third"==e.name?a("carsMaintenance",{attrs:{vehicleId:e.vehicleId,vehicleDetails:e.vehicleDetails},on:{cb:e.callback}}):e._e()],1),e._v(" "),a("el-tab-pane",{attrs:{label:e.$t("table.PlayRecording"),name:"fourth"}},["fourth"==e.name?a("playRecording",{attrs:{vehicleId:e.vehicleId}}):e._e()],1),e._v(" "),a("el-tab-pane",{attrs:{label:e.$t("table.FacilityRecords"),name:"fifth"}},["fifth"==e.name?a("facilityRecords",{attrs:{vehicleId:e.vehicleId}}):e._e()],1)],1)],1),e._v(" "),a("el-dialog",{attrs:{visible:e.dialogVisible,"close-on-click-modal":!1,"destroy-on-close":!0,width:"50%"},on:{close:e.close}},[a("gmap-map",{staticStyle:{width:"100%",height:"550px"},attrs:{center:e.centers,zoom:14}},e._l(e.markers,(function(t,i){return a("gmap-marker",{key:i,attrs:{position:t.position,clickable:!0,draggable:!0},on:{click:function(a){e.centers=t.position}}})})),1)],1)],1)},n=[],r=(a("96cf"),a("3b8d")),l=(a("7f7f"),a("ac6a"),a("db72")),s=a("2f62"),c=a("61b4"),o=a("7615"),u=a("7e63"),d=a("438a"),h=a("13a9"),p=a("1832"),m=a("67e1"),v={components:{OneWayRecording:c["default"],CarsMaintenance:o["default"],PlayRecording:u["default"],FacilityRecords:d["default"]},data:function(){return{query:{divisionId:"",licensePlateNumberOrDeviceId:"",onlineOnly:""},vehicleId:"",vehicleDetails:{},disabled:!1,roleStatus:[{id:!1,name:this.$t("table.Stop")},{id:!0,name:this.$t("table.Driving")}],Ignitionstatus:{},doorLockstatus:{},loading:!1,data:[],activeName:"first",name:"",licensePlateNumber:"",VehicleStateDTO:{equipment:{},trajectoryDetails:{}},remainingFuel:"",dialogVisible:!1,centers:{lat:0,lng:0},markers:[{position:{lat:0,lng:0}}]}},computed:Object(l["a"])({},Object(s["b"])([])),created:function(){this.getMonitorDivisions()},methods:{search:function(){this.getMonitorDivisions()},getMonitorDivisions:function(){var e=this,t=this;Object(h["g"])(this.query).then((function(a){a.data.forEach((function(e){e.label=e.name}));for(var i=a.data[0].children,n=0;n<i.length;n++)if(i[n].label=i[n].name,i[n].children)for(var r=0;r<i[n].children.length;r++)i[n].children[r].label=i[n].children[r].name,i[n].children[r].vehicles&&i[n].children[r].vehicles.length>0&&(i[n].children[r].vehicles.forEach((function(e){e.label=e.name+" ("+e.licensePlateNumber+")"})),i[n].children[r].children=i[n].children[r].vehicles,t.vehicleId=i[n].children[r].children[0].id,t.licensePlateNumber=i[n].children[r].children[0].licensePlateNumber);e.data=JSON.parse(JSON.stringify(a.data)),console.log(t.vehicleId,t.licensePlateNumber,"ID和车牌"),t.vehicleId&&t.getVehiclesDetail()})).catch((function(e){console.log(e,"ret")}))},handleNodeClick:function(e){e.licensePlateNumber&&(this.vehicleId=e.id,this.licensePlateNumber=e.licensePlateNumber,this.getVehiclesDetail())},getVehiclesDetail:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.loading=!0,Object(p["c"])(this.vehicleId).then((function(e){t.loading=!1,t.vehicleDetails=e.data,t.getCurrentState(),t.setIgnitionstatus(),t.getQueryLock()})).catch((function(e){t.loading=!1}));case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),setIgnitionstatus:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t={plateNumber:this.licensePlateNumber},Object(h["l"])(t).then((function(e){e.data.data?(a.Ignitionstatus=e.data.data,a.Ignitionstatus.fireStatus="CLOSE_FIRE"===a.Ignitionstatu.fireStatus?"OFF":"ON"):a.Ignitionstatus={}})).catch((function(e){console.log(e,"ret")}));case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getQueryLock:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t={plateNumber:this.licensePlateNumber},e.next=3,Object(h["h"])(t);case 3:a=e.sent,i=a.data,i.data?this.doorLockstatus=i.data:(this.doorLockstatus={},this.$message.error(i.message));case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),setLock:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var a,i,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={vehicleId:this.vehicleId,mode:""},a.mode=t?"open":"close",e.next=4,Object(h["m"])(a);case 4:if(i=e.sent,n=i.data,0==n.code){e.next=9;break}return this.$message.error(n.message),e.abrupt("return");case 9:this.$message.success(n.message),this.getVehiclesDetail();case 11:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),getCurrentState:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(h["d"])(this.vehicleId);case 2:t=e.sent,a=t.data,a.equipment||(a.equipment={}),a.trajectoryDetails||(a.trajectoryDetails={}),a.trajectoryDetails.receivedTime&&(a.trajectoryDetails.receivedTime=Object(m["a"])(a.trajectoryDetails.receivedTime)),this.VehicleStateDTO=a,this.vehicleDetails.tankVolume?(i=a.remainingFuel/this.vehicleDetails.tankVolume*100,this.remainingFuel=i.toFixed(2)+"%"):this.remainingFuel="";case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),RefreshRealTimeStatus:function(){this.vehicleId&&(this.getCurrentState(),this.setIgnitionstatus(),this.getQueryLock())},handleClick:function(e){this.name=e.name,this.vehicleId=this.vehicleId},lookMap:function(e){e.lat&&(this.centers.lat=e.lat,this.centers.lng=e.lng,this.markers[0].position.lat=e.lat,this.markers[0].position.lng=e.lng,this.dialogVisible=!0)},close:function(){this.dialogVisible=!1},callback:function(e){console.log(e,"asasasasasasasasa"),this.vehicleId=e,this.getVehiclesDetail()}}},f=v,b=(a("c541"),a("cdf0"),a("2877")),g=Object(b["a"])(f,i,n,!1,null,"41995def",null);t["default"]=g.exports},8831:function(e,t,a){},abc0:function(e,t,a){"use strict";var i=a("8831"),n=a.n(i);n.a},b9d7:function(e,t,a){"use strict";var i=a("d898"),n=a.n(i);n.a},c541:function(e,t,a){"use strict";var i=a("7272"),n=a.n(i);n.a},cb01:function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"c",(function(){return r})),a.d(t,"a",(function(){return l})),a.d(t,"d",(function(){return s})),a.d(t,"e",(function(){return c}));var i=a("b775");function n(e){return Object(i["a"])({url:"/equipment-faults",method:"get",params:e})}function r(e){return Object(i["a"])({url:"/equipment-faults/batch-read/".concat(e),method:"get"})}function l(e){return Object(i["a"])({url:"/equipment-faults/".concat(e),method:"get"})}function s(e){return Object(i["a"])({url:"/equipment-faults/".concat(e,"/read"),method:"get"})}function c(e){return Object(i["a"])({url:"/equipment-faults/handle",method:"put",data:e})}},cdf0:function(e,t,a){"use strict";var i=a("f22b"),n=a.n(i);n.a},d898:function(e,t,a){},e13c:function(e,t,a){},f22b:function(e,t,a){}}]);