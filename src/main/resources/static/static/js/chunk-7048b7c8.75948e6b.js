(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7048b7c8"],{"1d10":function(t,e,a){},"67e1":function(t,e,a){"use strict";a.d(e,"a",(function(){return n}));a("f576");function n(t){var e=new Date(t),a=e.getFullYear(),n=(e.getMonth()+1+"").padStart(2,"0"),i=(e.getDate()+"").padStart(2,"0"),r=(e.getHours()+"").padStart(2,"0"),s=(e.getMinutes()+"").padStart(2,"0"),o=(e.getSeconds()+"").padStart(2,"0");return"".concat(a,"-").concat(n,"-").concat(i," ").concat(r,":").concat(s,":").concat(o)}},"6b23":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"settings"},[a("span",[t._v(t._s(t.$t("table.Recording")))]),t._v(" "),a("el-input",{on:{change:t.inputNumber},model:{value:t.form.trajectoryReserveDays,callback:function(e){t.$set(t.form,"trajectoryReserveDays",t._n(e))},expression:"form.trajectoryReserveDays"}}),t._v("\n    "+t._s(t.$t("table.day"))+"\n  ")],1),t._v(" "),a("div",{staticClass:"settings"},[a("span",[t._v(t._s(t.$t("table.mileageMultiple")))]),t._v(" "),a("el-input",{on:{change:t.changemIleageMultiple},model:{value:t.form.mileageMultiple,callback:function(e){t.$set(t.form,"mileageMultiple",e)},expression:"form.mileageMultiple"}})],1),t._v(" "),a("div",{staticClass:"settings"},[a("span",[t._v(t._s(t.$t("table.FacilityRecordsDownload")))]),t._v(" "),a("el-button",{attrs:{type:"primary",plain:""},on:{click:t.backupSystemConfigs}},[t._v(t._s(t.$t("table.FacilityRecordsDownload")))])],1),t._v(" "),a("div",{staticClass:"settings"},[a("span",[t._v(t._s(t.$t("table.FacilityRecordsDownload"))+t._s(t.$t("table.Download")))]),t._v(" "),a("el-button",{attrs:{type:"primary",plain:""},on:{click:t.getBackupList}},[t._v(t._s(t.$t("table.ExcelDownload")))])],1),t._v(" "),a("div",{staticClass:"settings"},[a("span",[t._v("("+t._s(t.$t("table.LastDownloadTime"))+"ï¼š"+t._s(t.form.lastBackupTime)+")")])]),t._v(" "),a("el-dialog",{attrs:{title:t.$t("table.FacilityRecordsDownload"),visible:t.dialogVisible,"close-on-click-modal":!1,"destroy-on-close":!0},on:{close:t.closeBackDialog}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.list,stripe:"",border:"",size:"small"}},[a("el-table-column",{attrs:{type:"index",label:"#",width:"100",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"rptName",label:t.$t("table.Nickname"),align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"generatedOn",label:t.$t("table.Time"),width:"160",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:t.$t("table.status"),align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.completed?a("span",[t._v(t._s(t.$t("table.Completed")))]):a("span",[t._v(t._s(t.$t("table.incomplete")))])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:t.$t("table.Operation"),width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.completed?a("el-button",{attrs:{plain:"",size:"mini",type:"primary"},on:{click:function(a){return t.downloadSystemConfig(e.row)}}},[a("span",[t._v(t._s(t.$t("table.ExcelDownload")))])]):t._e()]}}])})],1)],1)],1)},i=[],r=(a("ac6a"),a("96cf"),a("3b8d")),s=(a("3b2b"),a("b775"));function o(t){return Object(s["a"])({url:"/configs",method:"get",params:t})}function c(t){return Object(s["a"])({url:"/configs",method:"put",data:t})}function l(t){return Object(s["a"])({url:"/trajectories/backup",method:"get",params:t})}function u(t){return Object(s["a"])({url:"/trajectories/backup-files",method:"get",params:t})}function d(t,e){return Object(s["a"])({url:"/trajectories/download/".concat(t),method:"get",responseType:e})}var p=a("67e1"),m={data:function(){return{loading:!1,form:{trajectoryReserveDays:"",mileageMultiple:""},dialogVisible:!1,backForm:{},list:[],backup:!1}},created:function(){this.getSystemConfigs()},methods:{check:function(t){var e=new RegExp("^(([0-9]+\\.[0-9]*[1-9][0-9]*)|([0-9]*[1-9][0-9]*\\.[0-9]+)|([0-9]*[1-9][0-9]*))$"),a=e.test(t);return a},inputNumber:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,a=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=this.check(this.form.trajectoryReserveDays),e){t.next=5;break}return this.$message.warning("Not Number!"),this.form.trajectoryReserveDays="",t.abrupt("return");case 5:this.loading=!0,c(this.form).then((function(t){a.loading=!1,a.getSystemConfigs(),a.$message.success("Success")})).catch((function(t){a.loading=!1}));case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),changemIleageMultiple:function(){var t=this,e=this.check(this.form.mileageMultiple);if(!e)return this.$message.warning("Not Number!"),void(this.form.mileageMultiple="");this.loading=!0,c(this.form).then((function(e){t.loading=!1,t.getSystemConfigs(),t.$message.success("Success")})).catch((function(e){t.loading=!1}))},getSystemConfigs:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,o();case 2:e=t.sent,a=e.data,this.form=a;case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),backupSystemConfigs:function(){var t=this;this.loading=!0,l().then((function(e){t.loading=!1,t.backup=!0})).catch((function(e){t.loading=!1}))},getBackupList:function(){var t=this;this.backup?(this.dialogVisible=!0,u().then((function(e){e.data.forEach((function(t){t.generatedOn=Object(p["a"])(t.generatedOn)})),t.list=e.data})).catch((function(t){}))):this.$message.warning(this.$t("table.Pleasebackup"))},closeBackDialog:function(){this.dialogVisible=!1},downloadSystemConfig:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){var a=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this,t.next=3,d(e.id,"blob").then((function(t){console.log(t,"aaaaaaa");var a=document.createElement("a"),n=new Blob([t.data],{type:"application/vnd.ms-excel"});a.style.display="none",a.href=URL.createObjectURL(n),a.setAttribute("download",e.rptName),document.body.appendChild(a),a.click(),document.body.removeChild(a)})).catch((function(t){a.$Notice.error({title:"error",desc:t})}));case 3:t.sent;case 4:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()}},g=m,f=(a("a382"),a("2877")),b=Object(f["a"])(g,n,i,!1,null,null,null);e["default"]=b.exports},a382:function(t,e,a){"use strict";var n=a("1d10"),i=a.n(n);i.a}}]);