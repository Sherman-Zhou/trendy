(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6f9d350b","chunk-ecc55cb8","chunk-2d0e1840"],{2017:function(e,t,s){"use strict";var i=s("b12d"),r=s.n(i);r.a},"7b87":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("el-dialog",{attrs:{title:e.$t("table.PasswordReset"),"show-close":!1,visible:e.dialogVisible,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t},close:e.close}},[s("el-form",{staticClass:"login_form",attrs:{model:e.form,"label-width":"150px","label-position":"left"}},[s("el-form-item",{attrs:{prop:"newPassword",label:e.$t("login.newPassword")}},[s("el-input",{attrs:{"prefix-icon":"iconfont icon-user"},model:{value:e.form.newPassword,callback:function(t){e.$set(e.form,"newPassword",t)},expression:"form.newPassword"}})],1),e._v(" "),s("el-form-item",{attrs:{prop:"newPassword",label:e.$t("login.newPasswordAgain")}},[s("el-input",{attrs:{"prefix-icon":"iconfont icon-3702mima",type:"password"},model:{value:e.newPassword,callback:function(t){e.newPassword=t},expression:"newPassword"}})],1)],1),e._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{type:"primary"},on:{click:e.savePassword}},[e._v(e._s(e.$t("permission.confirm")))])],1)],1)],1)},r=[],n=(s("96cf"),s("3b8d")),a=s("ed08"),o=s("7ded"),l={props:{visible:{default:function(){return!1},type:Boolean},formData:{default:function(){return{}}}},data:function(){return{form:{},newPassword:""}},created:function(){this.form=Object(a["c"])(this.formData)},computed:{dialogVisible:function(){var e=!1;return this.visible&&(e=!0),e}},methods:{savePassword:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.newPassword){e.next=3;break}return this.$message.error("不能為空!"),e.abrupt("return");case 3:if(this.form.newPassword==this.newPassword){e.next=6;break}return this.$message.error("兩次輸入密碼不相同!"),e.abrupt("return");case 6:return e.next=8,Object(o["e"])(this.form);case 8:t=e.sent,t.data,this.$message.success("success"),this.close();case 12:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),close:function(){this.$router.push({path:this.redirect||"/"}),this.$emit("cb","close")}}},c=l,u=s("2877"),d=Object(u["a"])(c,i,r,!1,null,null,null);t["default"]=d.exports},"95d5a":function(e,t,s){},"9ed6":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"login-container"},[s("div",{staticClass:"login_box"},[s("div",{staticClass:"avatar_box"},[s("h3",{staticClass:"title"},[e._v(e._s(e.$t("login.title")))])]),e._v(" "),s("lang-select",{staticClass:"set-language"}),e._v(" "),s("el-form",{ref:"loginForm",staticClass:"login_form",attrs:{model:e.loginForm,rules:e.loginRules,"label-width":"100px","label-position":"left"}},[s("el-form-item",{attrs:{prop:"username",label:e.$t("login.username")}},[s("el-input",{attrs:{"prefix-icon":"iconfont icon-user"},model:{value:e.loginForm.username,callback:function(t){e.$set(e.loginForm,"username",t)},expression:"loginForm.username"}})],1),e._v(" "),s("el-form-item",{attrs:{prop:"password",label:e.$t("login.password")}},[s("el-input",{attrs:{"prefix-icon":"iconfont icon-3702mima",type:"password"},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}})],1),e._v(" "),s("el-form-item",[s("div",{staticClass:"btns"},[s("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return t.preventDefault(),e.handleLogin(t)}}},[e._v(e._s(e.$t("login.logIn")))]),e._v(" "),s("el-button",{attrs:{type:"info"},on:{click:e.resetLoginForm}},[e._v(e._s(e.$t("login.PasswordReset")))])],1)])],1)],1),e._v(" "),s("el-dialog",{attrs:{title:e.$t("login.EmailRegistration"),"show-close":!1,visible:e.centerDialogVisible,width:"30%"},on:{"update:visible":function(t){e.centerDialogVisible=t},close:e.closeDialogVisible}},[s("div",{staticClass:"dialog_title"},[e._v(e._s(e.$t("login.emailAddress")))]),e._v(" "),s("el-input",{model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),e._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{type:"primary"},on:{click:e.saveEmail}},[e._v(e._s(e.$t("permission.confirm")))]),e._v(" "),s("div",{staticClass:"dialog_title"},[e._v(e._s(e.$t("login.emailPrompt")))])],1)],1),e._v(" "),s("el-dialog",{attrs:{title:e.$t("login.PasswordReset"),"show-close":!1,visible:e.passwordDialogVisible,width:"30%"},on:{"update:visible":function(t){e.passwordDialogVisible=t},close:e.closeDialogVisible}},[s("div",{staticClass:"dialog_title"},[e._v(e._s(e.$t("login.sendEmailaccount"))+e._s(e.user.email)+e._s(e.$t("login.sendEmailpassword")))]),e._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{type:"primary"},on:{click:e.closeDialogVisible}},[e._v(e._s(e.$t("permission.confirm")))])],1)]),e._v(" "),e.dialogData.visible?s("password-dialog",{attrs:{visible:e.dialogData.visible,"form-data":e.dialogData.formData},on:{cb:e.closeDialogVisible}}):e._e()],1)},r=[],n=(s("ac6a"),s("456d"),s("96cf"),s("3b8d")),a=s("61f7"),o=s("1131"),l=s("c62e"),c=s("7b87"),u=s("c24f"),d=s("7ded"),f={name:"Login",components:{LangSelect:o["a"],SocialSign:l["default"],PasswordDialog:c["default"]},data:function(){var e=function(e,t,s){Object(a["f"])(t)?s():s(new Error("Please enter the correct user name"))},t=function(e,t,s){t.length<4?s(new Error("The password can not be less than 4 digits")):s()};return{loginForm:{username:"admin",password:"admin"},loginRules:{username:[{required:!0,trigger:"blur",validator:e}],password:[{required:!0,trigger:"blur",validator:t}]},passwordType:"password",capsTooltip:!1,loading:!1,showDialog:!1,redirect:void 0,otherQuery:{},centerDialogVisible:!1,passwordDialogVisible:!1,user:{},email:"",dialogData:{visible:!1,formData:{}}}},watch:{$route:{handler:function(e){var t=e.query;t&&(this.redirect=t.redirect,this.otherQuery=this.getOtherQuery(t))},immediate:!0}},created:function(){var e=this.$route.query.key;e&&(this.dialogData.visible=!0,this.dialogData.formData.key=e)},mounted:function(){""===this.loginForm.username?this.$refs.username.focus():""===this.loginForm.password&&this.$refs.password.focus()},destroyed:function(){},methods:{checkCapslock:function(e){var t=e.key;this.capsTooltip=t&&1===t.length&&t>="A"&&t<="Z"},showPwd:function(){var e=this;"password"===this.passwordType?this.passwordType="":this.passwordType="password",this.$nextTick((function(){e.$refs.password.focus()}))},handleLogin:function(){var e=this;this.$refs.loginForm.validate(function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(s){var i,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!s){t.next=13;break}return e.loading=!0,t.next=4,Object(u["i"])(e.loginForm);case 4:if(i=t.sent,r=i.data,e.loading=!1,!r.needRegister){t.next=10;break}return e.centerDialogVisible=!0,t.abrupt("return");case 10:e.$store.dispatch("user/login",r).then((function(){e.$router.push({path:e.redirect||"/",query:e.otherQuery}),e.loading=!1})).catch((function(){e.loading=!1})),t.next=15;break;case 13:return console.log("error submit!!"),t.abrupt("return",!1);case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},getOtherQuery:function(e){return Object.keys(e).reduce((function(t,s){return"redirect"!==s&&(t[s]=e[s]),t}),{})},resetLoginForm:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(d["c"])(this.loginForm.username);case 2:t=e.sent,s=t.data,s.email=this.replacepos(s.email,2,3,".."),this.user=s,this.passwordDialogVisible=!0;case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),saveEmail:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t={login:this.loginForm.username,email:this.email},e.next=3,Object(d["d"])(t);case 3:e.sent,this.$router.push({path:this.redirect||"/",query:this.otherQuery}),this.centerDialogVisible=!1;case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),replacepos:function(e,t,s,i){return e.substring(0,s-1)+i+e.substring(s+1)},closeDialogVisible:function(){this.email="",this.centerDialogVisible=!1,this.passwordDialogVisible=!1,this.dialogData.visible=!1}}},p=f,m=(s("2017"),s("e698"),s("2877")),g=Object(m["a"])(p,i,r,!1,null,"d38832e6",null);t["default"]=g.exports},b12d:function(e,t,s){},b208:function(e,t,s){},c62e:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"social-signup-container"},[s("div",{staticClass:"sign-btn",on:{click:function(t){return e.wechatHandleClick("wechat")}}},[s("span",{staticClass:"wx-svg-container"},[s("svg-icon",{staticClass:"icon",attrs:{"icon-class":"wechat"}})],1),e._v("\n    WeChat\n  ")]),e._v(" "),s("div",{staticClass:"sign-btn",on:{click:function(t){return e.tencentHandleClick("tencent")}}},[s("span",{staticClass:"qq-svg-container"},[s("svg-icon",{staticClass:"icon",attrs:{"icon-class":"qq"}})],1),e._v("\n    QQ\n  ")])])},r=[],n={name:"SocialSignin",methods:{wechatHandleClick:function(e){alert("ok")},tencentHandleClick:function(e){alert("ok")}}},a=n,o=(s("edc1"),s("2877")),l=Object(o["a"])(a,i,r,!1,null,"c817cede",null);t["default"]=l.exports},e698:function(e,t,s){"use strict";var i=s("b208"),r=s.n(i);r.a},edc1:function(e,t,s){"use strict";var i=s("95d5a"),r=s.n(i);r.a}}]);